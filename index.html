<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisa de Agendamento | WebStory</title>
    <style>
        /* Estilo Base */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Roboto, sans-serif; }
        body { background: #000; color: #fff; overflow: hidden; }
        
        .story-container { 
            position: relative; 
            width: 100vw; 
            height: 100vh; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            background: linear-gradient(180deg, #1a1a1a 0%, #000 100%);
        }

        /* Barra de Navega√ß√£o e Contador */
        .header-nav {
            position: absolute;
            top: 15px;
            width: 90%;
            z-index: 10;
            display: none; 
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        .progress-bar { width: 100%; display: flex; gap: 5px; }
        .progress-segment { height: 4px; flex: 1; background: rgba(255,255,255,0.2); border-radius: 10px; }
        .progress-segment.active { background: #28a745; transition: background 0.3s; }
        #stepCounter { font-size: 0.75rem; color: rgba(255,255,255,0.5); font-weight: bold; letter-spacing: 1px; }

        /* Slides */
        .slide { display: none; width: 85%; max-width: 400px; text-align: center; animation: fadeIn 0.4s ease-out; }
        .slide.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Textos */
        .hero-emoji { font-size: 4rem; margin-bottom: 20px; display: block; }
        .hero-title { font-size: 2.2rem; line-height: 1.2; margin-bottom: 15px; font-weight: 800; }
        h1 { font-size: 1.6rem; margin-bottom: 1.8rem; font-weight: 600; line-height: 1.3; }
        p { font-size: 1.1rem; color: #bbb; margin-bottom: 30px; }

        /* Intera√ß√µes */
        .options { display: flex; flex-direction: column; gap: 12px; }
        button { 
            padding: 18px; border: none; border-radius: 15px; 
            background: #222; color: #fff; font-size: 1rem; 
            cursor: pointer; transition: all 0.2s; font-weight: 500;
        }
        button:active { transform: scale(0.96); background: #333; }
        
        .btn-start { background: #fff; color: #000; font-weight: bold; font-size: 1.2rem; width: 100%; }
        .btn-primary { background: #007bff; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn-final { background: #28a745; font-weight: bold; width: 100%; margin-top: 15px; }

        input { 
            width: 100%; padding: 18px; border-radius: 12px; border: 1px solid #333; 
            background: #111; color: #fff; margin-bottom: 12px; font-size: 1rem; 
        }
        input:focus { border-color: #007bff; outline: none; }
    </style>
</head>
<body>

<div class="story-container">
    <div class="header-nav" id="headerNav">
        <div class="progress-bar" id="progressBar"></div>
        <div id="stepCounter">Passo <span id="currentStepText">1</span> de 7</div>
    </div>

    <div class="slide active" id="s0">
        <span class="hero-emoji">üöÄ</span>
        <h1 class="hero-title">Chega de perder tempo com agendamentos.</h1>
        <p>Responda 7 perguntas r√°pidas e veja como simplificar sua rotina.</p>
        <button class="btn-start" onclick="startSurvey()">INICIAR AGORA</button>
    </div>

    <div class="slide" id="s1">
        <h1>üìÖ Como voc√™ agenda seus clientes hoje?</h1>
        <div class="options">
            <button onclick="next('metodo', 'WhatsApp')">WhatsApp</button>
            <button onclick="next('metodo', 'Agenda de papel')">Agenda de papel</button>
            <button onclick="next('metodo', 'App')">App</button>
            <button onclick="next('metodo', 'Tudo misturado üòµ')">Tudo misturado üòµ</button>
        </div>
    </div>

    <div class="slide" id="s2">
        <h1>‚ùå J√° teve problema com hor√°rios ou clientes faltando?</h1>
        <div class="options">
            <button onclick="next('dor', 'Sim üò©')">Sim üò©</button>
            <button onclick="next('dor', 'J√° aconteceu')">J√° aconteceu</button>
        </div>
    </div>

    <div class="slide" id="s3">
        <h1>Isso te atrapalha com que frequ√™ncia?</h1>
        <div class="options">
            <button onclick="next('frequencia', 'Quase todo dia')">Quase todo dia</button>
            <button onclick="next('frequencia', '√Äs vezes')">√Äs vezes</button>
            <button onclick="next('frequencia', 'Raramente')">Raramente</button>
        </div>
    </div>

    <div class="slide" id="s4">
        <h1>Voc√™ usa algum app hoje?</h1>
        <div class="options">
            <button onclick="toggleAppInput(true)">Sim (qual?)</button>
            <button onclick="next('usa_app_status', 'N√£o uso')">N√£o uso</button>
        </div>
        <div id="appInputWrap" style="display:none; margin-top: 20px;">
            <input type="text" id="app_nome" placeholder="Ex: Google Calendar, Booksy...">
            <button class="btn-primary" onclick="next('usa_app_status', 'Sim', document.getElementById('app_nome').value)">Continuar ‚Üí</button>
        </div>
    </div>

    <div class="slide" id="s5">
        <h1>üí∞ Quanto pagaria por um app simples que resolvesse isso?</h1>
        <div class="options">
            <button onclick="next('preco', 'At√© R$ 29')">At√© R$ 29</button>
            <button onclick="next('preco', 'At√© R$ 39')">At√© R$ 39</button>
            <button onclick="next('preco', 'Mais que isso, se funcionar')">Mais que isso</button>
        </div>
    </div>

    <div class="slide" id="s6">
        <h1>üöÄ Quer testar essa solu√ß√£o antes de todo mundo?</h1>
        <div class="options">
            <button onclick="next('interesse', 'Sim, quero participar')">Sim, quero participar</button>
            <button onclick="next('interesse', 'Talvez')">Talvez</button>
        </div>
    </div>

    <div class="slide" id="s7">
        <h1>üëá Pra te chamar quando estiver pronto</h1>
        <input type="text" id="nome" placeholder="Seu Nome">
        <input type="email" id="email" placeholder="Seu E-mail">
        <input type="tel" id="whatsapp" placeholder="WhatsApp">
        <button class="btn-final" id="btnFinish" onclick="finish()">FINALIZAR üèÅ</button>
    </div>

    <div class="slide" id="s8">
        <span class="hero-emoji">‚úÖ</span>
        <h1 class="hero-title">Tudo pronto!</h1>
        <p>Suas respostas foram salvas. Algu√©m da nossa equipe entrar√° em contato via <b>WhatsApp</b> muito em breve!</p>
    </div>
</div>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzcnmS9EVk2w3UEGMp2uaY0eADaZb0AowA-_6H2Os5hymAHKS0Ggtan7jl-flJMOAMQ/exec'; 
    
    let current = 0;
    const totalQuestions = 7;
    const formData = {};

    // Inicia barra de progresso
    const bar = document.getElementById('progressBar');
    for(let i=1; i<=totalQuestions; i++) {
        bar.innerHTML += `<div class="progress-segment" id="p${i}"></div>`;
    }

    function updateNav() {
        if (current >= 1 && current <= totalQuestions) {
            document.getElementById('headerNav').style.display = 'flex';
            document.getElementById('currentStepText').innerText = current;
        } else {
            document.getElementById('headerNav').style.display = 'none';
        }
    }

    function startSurvey() {
        document.getElementById('s0').classList.remove('active');
        current = 1;
        document.getElementById('s1').classList.add('active');
        document.getElementById('p1').classList.add('active');
        updateNav();
    }

    function next(field, value, extraValue = null) {
        formData[field] = value;
        if(extraValue) formData['qual_app'] = extraValue;
        
        document.getElementById(`s${current}`).classList.remove('active');
        current++;
        
        if(document.getElementById(`s${current}`)) {
            document.getElementById(`s${current}`).classList.add('active');
            if(document.getElementById(`p${current}`)) {
                document.getElementById(`p${current}`).classList.add('active');
            }
            updateNav();
        }
    }

    function toggleAppInput(show) {
        document.getElementById('appInputWrap').style.display = show ? 'block' : 'none';
    }

    function finish() {
        const btn = document.getElementById('btnFinish');
        formData.nome = document.getElementById('nome').value;
        formData.email = document.getElementById('email').value;
        formData.whatsapp = document.getElementById('whatsapp').value;

        if(!formData.nome || !formData.whatsapp) return alert('Por favor, preencha nome e WhatsApp!');

        btn.innerText = "ENVIANDO...";
        btn.disabled = true;

        fetch(scriptURL, { method: 'POST', body: JSON.stringify(formData) })
        .then(() => {
            document.getElementById('s7').classList.remove('active');
            document.getElementById('s8').classList.add('active');
            current = 99; 
            updateNav();
        })
        .catch(err => {
            alert('Enviado! (O Google Sheets √†s vezes retorna erro de CORS mas salva os dados. Verifique sua planilha!)');
            document.getElementById('s7').classList.remove('active');
            document.getElementById('s8').classList.add('active');
            current = 99;
            updateNav();
        });
    }
</script>

</body>
</html>